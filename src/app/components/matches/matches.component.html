<div class="matches-container" *ngIf="simService.matches && simService.matches.length > 0; else noMatches">


  <h3>Matches by Group</h3>
  <mat-tab-group color="accent">
    <mat-tab *ngFor="let group of groupLetters">
      <ng-template mat-tab-label>
        Group {{ group }}
      </ng-template>
      <div *ngIf="groupMatches(group).length > 0">
        <table mat-table [dataSource]="groupMatches(group)" class="matches-table" multiTemplateDataRows>
          <!-- Match Number Column -->
          <ng-container matColumnDef="match">
            <th mat-header-cell *matHeaderCellDef>Match</th>
            <td mat-cell *matCellDef="let match">
              <span class="match-number mat-caption">M{{ match.match }}</span>
            </td>
          </ng-container>
          <!-- Date Column -->
          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef>Date</th>
            <td mat-cell *matCellDef="let match">
              <span class="match-date mat-caption">{{ match.date }}</span>
            </td>
          </ng-container>
          <!-- Team 1 Column -->
          <ng-container matColumnDef="team1">
            <th mat-header-cell *matHeaderCellDef>Home</th>
            <td mat-cell *matCellDef="let match">
              <span class="team-with-flag">{{ getTeamFlag(match.team1) }} {{ match.team1 }}</span>
            </td>
          </ng-container>
          <!-- VS Column -->
          <ng-container matColumnDef="vs">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let match">
              <span class="vs-text">vs</span>
            </td>
          </ng-container>
          <!-- Team 2 Column -->
          <ng-container matColumnDef="team2">
            <th mat-header-cell *matHeaderCellDef>Away</th>
            <td mat-cell *matCellDef="let match">
              <span class="team-with-flag">{{ getTeamFlag(match.team2) }} {{ match.team2 }}</span>
            </td>
          </ng-container>
          <!-- Venue Column -->
          <ng-container matColumnDef="venue">
            <th mat-header-cell *matHeaderCellDef>Venue</th>
            <td mat-cell *matCellDef="let match">
              <span class="match-venue mat-caption">
                {{ match.venueInfo?.city }}, {{ match.venueInfo?.country }}
              </span>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['match', 'date', 'team1', 'vs', 'team2', 'venue']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['match', 'date', 'team1', 'vs', 'team2', 'venue'];"></tr>
        </table>
      </div>
      <div *ngIf="groupMatches(group).length === 0" class="mat-body-2" style="padding: 16px; color: #888;">
        No matches for this group.
      </div>
    </mat-tab>
  </mat-tab-group>

  <br>
  <mat-divider></mat-divider>

  <h3>Matches by City</h3>
  <mat-tab-group color="warn">
  <mat-tab *ngFor="let venue of venueList">
    <ng-template mat-tab-label>
      {{ venue.city }}
    </ng-template>
    <table mat-table [dataSource]="getMatchesForVenue(venue)" class="venue-matches-table" multiTemplateDataRows>
      <!-- Match Number Column -->
      <ng-container matColumnDef="match">
        <th mat-header-cell *matHeaderCellDef>Match #</th>
        <td mat-cell *matCellDef="let match">{{ match.match }}</td>
      </ng-container>
      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef>Date</th>
        <td mat-cell *matCellDef="let match">{{ match.date }}</td>
      </ng-container>
      <!-- Team 1 Column -->
      <ng-container matColumnDef="team1">
        <th mat-header-cell *matHeaderCellDef>Team 1</th>
        <td mat-cell *matCellDef="let match">{{ match.team1 }}</td>
      </ng-container>
      <!-- VS Column -->
      <ng-container matColumnDef="vs">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let match">vs</td>
      </ng-container>
      <!-- Team 2 Column -->
      <ng-container matColumnDef="team2">
        <th mat-header-cell *matHeaderCellDef>Team 2</th>
        <td mat-cell *matCellDef="let match">{{ match.team2 }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['match', 'date', 'team1', 'vs', 'team2']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['match', 'date', 'team1', 'vs', 'team2'];"></tr>
    </table>
    <div *ngIf="getMatchesForVenue(venue).length === 0" class="mat-body-2" style="padding: 16px; color: #888;">
      No matches at this venue.
    </div>
  </mat-tab>
</mat-tab-group>
</div>
<ng-template #noMatches>
  <mat-card>
    <mat-card-content>
      <div style="text-align: center; padding: 20px; color: #888;">
        No matches to display. Run the draw first.
      </div>
    </mat-card-content>
  </mat-card>
</ng-template>